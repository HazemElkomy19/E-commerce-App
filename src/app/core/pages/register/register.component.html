

<form class=" shadow-lg max-w-md mx-auto p-8" (ngSubmit)="register()" [formGroup]="registerForm">
  <h2 class="text-3xl">Register</h2>
  @if (apiError) {
    <div class="flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-red-50 mt-2 dark:text-red-400" role="alert">
      {{apiError}}
    </div>
  }
  <div class="relative z-0 w-full mb-5 group">
    @let nameControl=registerForm.get("name");
      <input formControlName="name" type="text" name="name" id="floating_name" class="input-style peer" placeholder=" " required />
      <label for="floating_name" class=" label-style peer-focus:font-medium  peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">UserName</label>
      <app-error-messege [nameControl]="nameControl"></app-error-messege>

  </div>
  <div class="relative z-0 w-full mb-5 group">
    @let emailControl=registerForm.get("email");
    <input formControlName="email" type="email" name="email" id="floating_email" class="input-style peer" placeholder=" " required />
    <label for="floating_email" class=" label-style peer-focus:font-medium  peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">User E-mail</label>

    <app-error-messege [nameControl]="emailControl"></app-error-messege>

</div>

<div class="relative z-0 w-full mb-5 group">
  @let passwordControl=registerForm.get("password");
  <input formControlName="password" type="password" name="password" id="floating_password" class="input-style peer" placeholder=" " required />
  <label for="floating_password" class=" label-style peer-focus:font-medium  peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">User password</label>
  <app-error-messege [nameControl]="passwordControl"></app-error-messege>
</div>

<div class="relative z-0 w-full mb-5 group">
  @let rePasswordControl=registerForm.get("rePassword");
  <input formControlName="rePassword" type="password" name="rePassword" id="floating_rePassword" class="input-style peer" placeholder=" " required />
  <label for="floating_rePassword" class=" label-style peer-focus:font-medium  peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">User rePassword</label>

 @if ( rePasswordControl?.touched && ( rePasswordControl?.errors || registerForm.getError('misMatch'))) {
    <div class="flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-red-50 mt-2 dark:text-red-400" role="alert">
      <ul class="mt-1.5 list-disc list-inside">
        @if (rePasswordControl?.getError('required')) {
          <li>rePassword is required</li>
        }
        @else if (rePasswordControl?.getError('pattern')) {
          <li>Invalid pattern</li>
        }
        @else if (registerForm.getError('misMatch')) {
          <li>rePassword must match password</li>
        }

    </ul>
</div>
  }
</div>

<div class="relative z-0 w-full mb-5 group">
  @let phoneControl=registerForm.get("phone");
  <input formControlName="phone" type="tel" name="phone" id="floating_phone" class="input-style peer" placeholder=" " required />
  <label for="floating_phone" class=" label-style peer-focus:font-medium  peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">User Phone</label>
  <app-error-messege [nameControl]="phoneControl"></app-error-messege>
</div>

  <button type="submit" class="button-style">
    @if (isCallinApi) {
      <i class="fa fa-spin  fa-circle-notch"></i>
    }
    @else {
      Submit
    }

  </button>
</form>
